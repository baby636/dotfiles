#!/bin/bash -e
username="$1"

[ -z "$username" ] && \
    echo "Please provide <username> as the argument" && \
    exit 1

if ! sudo id -u "$username" &>/dev/null ; then
    echo "User $username does not exist"
    exit 1
fi

set -x

sudo who | grep "$username" && sudo pkill -9 -u "$username"
sudo deluser --remove-home "$username"
